<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>真心话大冒险 | Truth or Dare</title>
  <meta name="description" content="选择你的命运：真心话或大冒险。点击中间的 OR，让命运替你决定。" />
  <meta name="theme-color" content="#0b0f1a" />
  <style>
    :root{
      --bg-1:#0b0f1a;
      --bg-2:#101a2d;
      --accent:#8a7cff;
      --truth:#2dd4bf;
      --dare:#f43f5e;
      --text:#e6e8ef;
      --muted:#9aa3b2;
      --ring:#ffffff1a;
      --card:#0f1729cc;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --blur:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", "Noto Sans CJK SC", "Source Han Sans SC", sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% 10%, #1a2350 0%, rgba(26,35,80,0) 60%),
                  radial-gradient(1200px 800px at 80% 90%, #3b1f52 0%, rgba(59,31,82,0) 60%),
                  linear-gradient(180deg, var(--bg-1), var(--bg-2));
      overflow:hidden;
    }

    /* 动态背景网格 */
    .grid{
      position:fixed; inset:0; pointer-events:none; opacity:.25;
      background-image:
        radial-gradient(1px 1px at 10% 20%, #ffffff22 0 1px, transparent 2px),
        radial-gradient(1px 1px at 40% 80%, #ffffff18 0 1px, transparent 2px),
        radial-gradient(1px 1px at 80% 40%, #ffffff10 0 1px, transparent 2px);
      animation: drift 22s linear infinite;
    }
    @keyframes drift{
      0%{transform:translate3d(0,0,0) scale(1)}
      50%{transform:translate3d(-2%, -3%, 0) scale(1.02)}
      100%{transform:translate3d(0,0,0) scale(1)}
    }

    /* 布局 */
    .wrap{
      position:relative;
      min-height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:28px;
      padding:32px clamp(16px, 4vw, 48px);
    }

    /* 顶部标题卡片 */
    .hero{
      backdrop-filter:saturate(120%) blur(var(--blur));
      -webkit-backdrop-filter:saturate(120%) blur(var(--blur));
      background:linear-gradient(180deg, #ffffff10, #ffffff06);
      border:1px solid #ffffff22;
      border-radius:20px;
      padding:18px 22px;
      box-shadow:var(--shadow);
      text-align:center;
      user-select:none;
    }
    .title{
      font-weight:800;
      font-size:clamp(22px, 4.4vw, 40px);
      letter-spacing:.4px;
      line-height:1.15;
      margin:0;
      background: linear-gradient(90deg, #e7e7ff, #c9fdd7 45%, #ffd1dc 90%);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .subtitle{
      margin:8px 0 0;
      font-size:clamp(13px, 2.2vw, 16px);
      color:var(--muted);
    }

    /* 主操作区 */
    .board{
      position:relative;
      width:min(940px, 96vw);
      aspect-ratio: 16 / 9;
      max-height: 66vh;
      min-height: 380px;
      border-radius:28px;
      border:1px solid #ffffff22;
      background: linear-gradient(180deg, #0b1120cc, #0b1120b0);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .ring{
      position:absolute; inset:-2px;
      background:
        radial-gradient(70% 50% at 20% 0%, #7c93ff33 0, transparent 60%),
        radial-gradient(60% 50% at 80% 100%, #ff72a833 0, transparent 60%);
      filter: blur(20px);
      pointer-events:none;
    }
    .split{
      position:absolute; inset:0;
      display:grid;
      grid-template-columns:1fr auto 1fr;
      align-items:center;
      gap: clamp(16px, 4vw, 28px);
      padding: clamp(16px, 3.4vw, 28px);
    }

    /* 按钮基础 */
    .btn{
      position:relative;
      display:flex; align-items:center; justify-content:center;
      height:100%;
      min-height:240px;
      border-radius:22px;
      border:1px solid #ffffff1a;
      color:#0b0f1a;
      text-align:center;
      text-decoration:none;
      cursor:pointer;
      overflow:hidden;
      isolation:isolate;
      transition: transform .35s cubic-bezier(.2,.8,.2,1), box-shadow .35s, filter .35s;
      will-change: transform, filter;
      outline:none;
      user-select:none;
    }
    .btn:focus-visible{
      box-shadow: 0 0 0 2px #fff, 0 0 0 6px #7c8cff66;
    }
    .btn .label{
      position:relative; z-index:2;
      display:flex; flex-direction:column; align-items:center; gap:10px;
      transform: translateY(0);
      transition: transform .35s;
    }
    .btn .label .big{
      font-size: clamp(28px, 5vw, 56px);
      font-weight: 900;
      letter-spacing:.8px;
    }
    .btn .label .hint{
      font-size: clamp(12px, 2vw, 15px);
      color:#0b0f1a99;
      font-weight:600;
    }
    .btn .glow{
      position:absolute; inset:-30%;
      background: radial-gradient(60% 60% at 50% 50%, #ffffffaa 0, #ffffff55 28%, transparent 60%);
      opacity:0; transition: opacity .35s;
      filter: blur(22px);
    }
    .btn:hover .glow{opacity:.7}
    .btn:hover .label{transform: translateY(-2px)}
    .btn:active{transform: scale(.985)}

    /* 真心话 */
    .truth{
      background:
        linear-gradient(180deg, #a7f3d0, #34d399);
      box-shadow: 0 20px 50px rgba(52,211,153,.25), inset 0 0 0 1px #ffffff55;
    }
    .truth:hover{ box-shadow: 0 26px 60px rgba(52,211,153,.35) }

    /* 大冒险 */
    .dare{
      background:
        linear-gradient(180deg, #fecaca, #fb7185);
      box-shadow: 0 20px 50px rgba(244,63,94,.25), inset 0 0 0 1px #ffffff55;
    }
    .dare:hover{ box-shadow: 0 26px 60px rgba(244,63,94,.35) }

    /* OR 按钮 */
    .or-wrap{
      position:relative; width:min(160px, 16vw); height:min(160px, 16vw);
      min-width:120px; min-height:120px;
      display:grid; place-items:center;
    }
    .or-ring{
      position:absolute; inset:0; border-radius:50%;
      background:
        conic-gradient(from 0deg, #8a7cff, #ff72a8, #2dd4bf, #8a7cff);
      filter: blur(10px) saturate(130%);
      opacity:.85;
      animation: spin 6s linear infinite;
      mask: radial-gradient(farthest-side, transparent calc(50% - 12px), #000 calc(50% - 12px));
    }
    .or-core{
      position:relative; z-index:1;
      width:100%; height:100%; border-radius:50%;
      display:grid; place-items:center;
      background: radial-gradient(100% 100% at 30% 20%, #1a2240 0, #0c1328 100%);
      border:1px solid #ffffff22;
      box-shadow: inset 0 0 0 1px #00000055, 0 16px 40px #00000066;
      color:#e8eaff;
      letter-spacing:2px;
      font-weight:800;
      font-size: clamp(22px, 3.6vw, 28px);
      text-shadow: 0 2px 10px #00000066;
      cursor:pointer;
      transition: transform .4s cubic-bezier(.2,.9,.2,1), opacity .4s;
      user-select:none;
    }
    .or-core:hover{ transform: scale(1.05) }
    .or-core:active{ transform: scale(.98) }
    .or-core::after{
      content:"命运选择";
      position:absolute; bottom:10%; font-size:12px; letter-spacing:1.2px;
      color:#bfc6ff; opacity:.75;
    }

    /* 细节动效 */
    @keyframes spin{ to{ transform: rotate(360deg) } }
    .pulse{
      animation: pulse .45s ease;
    }
    @keyframes pulse{
      0%{ transform: scale(1); opacity:1 }
      50%{ transform: scale(1.12); opacity:.85 }
      100%{ transform: scale(1); opacity:1 }
    }
    .flash{
      position:absolute; inset:0; pointer-events:none;
      background: radial-gradient(60% 60% at 50% 50%, #ffffff22 0, transparent 60%);
      opacity:0; animation: flash .45s ease;
    }
    @keyframes flash{
      0%{opacity:0}
      40%{opacity:1}
      100%{opacity:0}
    }
    .shake{
      animation: shake .35s cubic-bezier(.36,.07,.19,.97) both;
    }
    @keyframes shake{
      10%, 90% { transform: translateX(-1px) }
      20%, 80% { transform: translateX(2px) }
      30%, 50%, 70% { transform: translateX(-4px) }
      40%, 60% { transform: translateX(4px) }
    }

    /* 底部 */
    .footer{
      opacity:.8;
      font-size:12px;
      color:var(--muted);
      text-align:center;
      user-select:none;
    }

    /* 无障碍：减少动效 */
    @media (prefers-reduced-motion: reduce){
      .grid, .or-ring{ animation: none }
      .btn, .or-core{ transition: none }
      .pulse, .flash, .shake{ animation: none }
    }

    /* 响应式优化 */
    @media (max-width: 720px){
      .split{
        grid-template-columns:1fr;
        grid-template-rows: 1fr auto 1fr;
      }
      .btn{ min-height:180px }
      .or-wrap{ margin-block: 6px }
      .hero{ padding:14px 16px }
    }
  </style>
</head>
<body>
  <div class="grid" aria-hidden="true"></div>

  <main class="wrap">
    <section class="hero" aria-label="标题">
      <h1 class="title">真心话 · 大冒险</h1>
      <p class="subtitle">选择你的命运，或者把选择权交给命运。</p>
    </section>

    <section class="board" role="group" aria-label="模式选择">
      <div class="ring" aria-hidden="true"></div>
      <div class="split">
        <!-- 真心话 -->
        <button class="btn truth" id="btn-truth" aria-label="进入真心话模式">
          <span class="glow" aria-hidden="true"></span>
          <span class="label">
            <span class="big">Truth</span>
            <span class="hint">真心话 · 更靠近真实</span>
          </span>
        </button>

        <!-- OR -->
        <div class="or-wrap">
          <div class="or-ring" aria-hidden="true"></div>
          <button class="or-core" id="btn-or" aria-label="交给命运选择">OR</button>
        </div>

        <!-- 大冒险 -->
        <button class="btn dare" id="btn-dare" aria-label="进入大冒险模式">
          <span class="glow" aria-hidden="true"></span>
          <span class="label">
            <span class="big">Dare</span>
            <span class="hint">大冒险 · 活得更大胆</span>
          </span>
        </button>
      </div>
      <div id="fx" aria-hidden="true"></div>
    </section>

    <p class="footer">小提示：按 Enter 键也会交给“命运选择”。</p>
  </main>

  <script>
    // 辅助：轻量路由跳转
    function go(mode){
      // 防抖：避免多次点击
      if (document.body.dataset.nav === '1') return;
      document.body.dataset.nav = '1';

      // 背景闪光反馈
      const fx = document.getElementById('fx');
      fx.className = 'flash';
      setTimeout(()=> fx.className = '', 500);

      // 轻微延迟，给动画留 320ms
      const url = `play.html?mode=${mode}`;
      setTimeout(()=> { location.href = url; }, 320);
    }

    // 随机选择逻辑 + 动效反馈
    function chooseRandom(){
      if (document.body.dataset.nav === '1') return;

      const orBtn = document.getElementById('btn-or');
      orBtn.classList.remove('pulse');
      void orBtn.offsetWidth; // 重置动画
      orBtn.classList.add('pulse');

      // 轻微“抖动”+ 文案闪烁，模拟命运装置启动
      const board = document.querySelector('.board');
      board.classList.add('shake');
      setTimeout(()=> board.classList.remove('shake'), 360);

      // 伪随机：增加“偏好交替”的体验（避免连选同一边）
      const modes = ['truth','dare'];
      const last = sessionStorage.getItem('lastPick');
      let pick = modes[Math.floor(Math.random() * modes.length)];
      if (last && Math.random() < 0.5) {
        pick = (last === 'truth') ? 'dare' : 'truth';
      }
      sessionStorage.setItem('lastPick', pick);

      // 过渡后跳转
      setTimeout(()=> go(pick), 300);
    }

    // 绑定事件
    (function bind(){
      const truth = document.getElementById('btn-truth');
      const dare  = document.getElementById('btn-dare');
      const orBtn = document.getElementById('btn-or');

      truth.addEventListener('click', ()=> go('truth'));
      dare .addEventListener('click', ()=> go('dare'));
      orBtn.addEventListener('click', chooseRandom);

      // 键盘：Enter = 命运选择
      document.addEventListener('keydown', (e)=>{
        const tag = (e.target && e.target.tagName) || '';
        const typing = tag === 'INPUT' || tag === 'TEXTAREA';
        if (!typing && (e.key === 'Enter')) {
          e.preventDefault();
          chooseRandom();
        }
      }, {passive:false});
    })();
  </script>
</body>
</html>
